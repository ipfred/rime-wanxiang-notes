# 进阶配置（理解万象的“可玩性”）

这章默认你已经完成了：

- 能正常部署、能输入
- 知道“生效目录是用户目录根目录”
- 明白 `wanxiang.custom.yaml` 是你最重要的入口

## 1) 真正学会 Patch：先读这一个文件

- `10-patch方法论.md`

读完你至少要能回答：

- 为什么 `menu/page_size: 6` 是“局部修改”，而不是把整个 `menu` 覆盖掉
- 如何用 `engine/filters/@before` / `@last` 做“插入/替换”

## 2) 双拼/全拼切换指令的原理（方便你排错）

文件：`lua/set_schema.lua`

它做了两件事：

1. 把示例 `*.custom.yaml` 复制到用户目录根目录（如果根目录已存在则不覆盖）
2. 把 custom 里引用的转写段落替换成目标方案（如“自然码/小鹤/全拼”）

所以如果你发现：

- 输入 `/flypy` 没反应：先确认 `lua/` 已复制、schema 已启用 Lua、并重新部署
- 切换后不生效：通常是“没重新部署”

## 3) 辅助码 / 反查：建议先用，再决定要不要深改

源 README 在“功能一览 → 辅助码”里给了大量示例（你可以先照着用）：

- 直接辅助（PRO）
- 间接辅助（PRO）
- 反查筛选（使用 `` ` `` 引导）

当你准备深改时，重点看：

- `wanxiang_reverse.custom.yaml`（反查相关的 custom）
- `wanxiang_algebra.yaml`（转写/派生规则的“总表”）

## 4) 语法模型（Grammar）

`wanxiang.schema.yaml` 有 `grammar:` 段落，表示方案支持语法模型。

通常做法是：下载模型文件放入用户目录后即可生效（不需要额外配置）。

如果你想做“性能/效果”取舍：

- 先只在 PC 上启用
- 移动端注意文件权限与部署速度（尤其 Android）

## 5) Lua 玩法清单（挑一个你感兴趣的）

你可以从以下方向逐个尝试，每次只改一个点，便于回滚：

- Tips 数据：`lua/tips/`（与 `tips_user.txt` 等相关）
- 手动排序：`lua/super_sequence.lua`（配套快捷键在 custom 里）
- 成对符号包裹：`paired_symbols`（在 `wanxiang.custom.yaml` 里能看到完整示例）
- 日期时间格式化：`date_formats` / `time_formats` / `datetime_formats`
